# CosmosSDKモジュールの紹介

このモジュールは、CosmosSDKアプリケーションのほとんどのロジックを定義します。開発者はCosmosSDKを使用してモジュールを組み合わせ、カスタムアプリケーション固有のブロックチェーンを構築します。このドキュメントでは、SDKモジュールの背後にある基本的な概念とモジュールの管理方法について概説します。 {まとめ}

## 読むための前提条件

-[Cosmos SDKアプリケーション分析](../basics/app-anatomy.md){前提条件}
-[Cosmos SDKトランザクションライフサイクル](../basics/tx-lifecycle.md){prereq}

## CosmosSDKアプリケーションでのモジュールの役割

Cosmos SDKは、ブロックチェーン開発用のRuby-on-Railsと見なすことができます。基盤となるコンセンサスエンジン[`multistore`](。./core/store.md#multistore)で状態を永続化し、[server](../core/node.md)で完全なノードを形成し、[interfaces](./module-interfaces.md)でクエリを処理します。

このコアに加えて、Cosmos SDKを使用すると、開発者はアプリケーションのビジネスロジックを実装するモジュールを構築できます。つまり、SDKモジュールはアプリケーションのロジックのほとんどを実装し、コアはモジュールの配線とグループ化を可能にします。最終的な目標は、強力なオープンソースのCosmos SDKモジュールエコシステムを構築し、複雑なブロックチェーンアプリケーションの構築をより簡単にすることです。

Cosmos SDKモジュールは、ステートマシン内の小さなステートマシンと見なすことができます。通常、[main multistore](../core/store.md)で1つ以上の `KVStore`を使用して、状態のサブセットと[messages-and-query.md#messages])を定義します。これらのメッセージは、Cosmos SDKコア[`BaseApp`](../core/baseapp。 md)。 

```
                                      +
                                      |
                                      |  Transaction relayed from the full-node's consensus engine
                                      |  to the node's application via DeliverTx
                                      |
                                      |
                                      |
                +---------------------v--------------------------+
                |                 APPLICATION                    |
                |                                                |
                |     Using baseapp's methods: Decode the Tx,    |
                |     extract and route the message(s)           |
                |                                                |
                +---------------------+--------------------------+
                                      |
                                      |
                                      |
                                      +---------------------------+
                                                                  |
                                                                  |
                                                                  |
                                                                  |  Message routed to the correct
                                                                  |  module to be processed
                                                                  |
                                                                  |
+----------------+  +---------------+  +----------------+  +------v----------+
|                |  |               |  |                |  |                 |
|  AUTH MODULE   |  |  BANK MODULE  |  | STAKING MODULE |  |   GOV MODULE    |
|                |  |               |  |                |  |                 |
|                |  |               |  |                |  | Handles message,|
|                |  |               |  |                |  | Updates state   |
|                |  |               |  |                |  |                 |
+----------------+  +---------------+  +----------------+  +------+----------+
                                                                  |
                                                                  |
                                                                  |
                                                                  |
                                       +--------------------------+
                                       |
                                       | Return result to the underlying consensus engine (e.g. Tendermint)
                                       | (0=Ok, 1=Err)
                                       v
```

このアーキテクチャのため、Cosmos SDKアプリケーションの構築は通常、アプリケーション固有のロジックを実装するためのモジュールの作成と、それらを既存のモジュールと組み合わせてアプリケーションを完成させることを中心に展開されます。開発者は通常、特定のユースケースを実装するために必要なロジックにまだ存在しないモジュールを扱い、既存のモジュールを使用して、住宅ローン、アカウント、トークン管理などのより一般的な機能を実装します。

## 開発者としてビルディングブロックを処理する方法

モジュールを作成するための明確なガイドラインはありませんが、開発者はモジュールを作成する際に次の重要な設計原則に留意する必要があります。

-**構成可能性**:Cosmos SDKアプリケーションは、ほとんどの場合、複数のモジュールで構成されています。つまり、開発者は、モジュールとCosmos SDKのコアとの統合を慎重に検討するだけでなく、他のモジュールとの統合も慎重に検討する必要があります。前者は[here](#main-components-of-sdk-modules)で概説されている標準のデザインパターンに従うことで実現され、後者は[`keeper`](./keeper.md)で実現されます。
-**特殊化**:**構成可能性**機能の直接的な結果は、モジュールを**特殊化**する必要があることです。開発者は、複数の機能をバッチで同じモジュールにマージするのではなく、モジュールのスコープを慎重に決定する必要があります。この関心の分離により、モジュールを他のプロジェクトで再利用できるようになり、アプリケーションのスケーラビリティが向上します。 **スペシャライゼーション**は、Cosmos SDKの[Object-Capability Model](../core/ocap.md)でも重要な役割を果たします。
-**機能**:ほとんどのモジュールは、他のモジュールのストレージに対して読み取りおよび/または書き込みを行う必要があります。ただし、オープンソース環境では、一部のモジュールが悪意のあるものである可能性があります。これが、モジュール開発者がモジュールが他のモジュールとどのように相互作用するかだけでなく、モジュールストレージにアクセスする方法も慎重に検討する必要がある理由です。 Cosmos SDKは、モジュール間のセキュリティを実現するために機能指向のアプローチを採用しています。これは、モジュールによって定義されたすべてのストアが、モジュールの[`keeper`](./keeper.md)によって保持されているキーによってアクセスされることを意味します。この[キーパー]は、ストレージへのアクセス方法と条件を定義します。モジュールストレージへのアクセスは、モジュールの[キーパー]への参照を渡すことによって行われます。

## CosmosSDKモジュールの主要コンポーネント

慣例により、モジュールは `。/x/`サブフォルダーで定義されます(たとえば、 `bank`モジュールは`。/x/bank`フォルダーで定義されます)。これらは通常、同じコアコンポーネントを共有します。

-[`keeper`](./keeper.md)、モジュールのストレージにアクセスしてステータスを更新するために使用されます。
-[`Msg`サービス](./messages-and-queries.md#messages)。メッセージが[` BaseApp`](../core/baseapp.md#message)によってモジュールにルーティングされるときに処理に使用されます)メッセージルーティング)および状態遷移をトリガーします。
-[クエリサービス](./query-services.md)、ユーザークエリが[`BaseApp`](../core/baseapp.md#query-routing)によってモジュールにルーティングされる場合、ユーザーの処理に使用されますクエリ。
-エンドユーザーがモジュールで定義されたステータスサブセットをクエリし、モジュールで定義されたカスタムタイプの[メッセージ]を作成するためのインターフェイス。

これらのコンポーネントに加えて、モジュールは `AppModule`インターフェースも実装しているため、[` module manager`](./module-manager.md)で管理できます。

推奨されるモジュールディレクトリ構造については、[Structure Document](./structure.md)を参照してください。

## 次へ{hide}

[`AppModule`インターフェースと` module manager`](./module-manager.md){hide}についてもっと読む 