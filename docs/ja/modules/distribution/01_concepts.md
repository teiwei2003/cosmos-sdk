# 概念

プルーフオブステーク(PoS)ブロックチェーンでは、取引手数料から得られた報酬が検証者に支払われます。料金分配モジュールは、検証者の委任者に報酬を公平に分配します。

報酬は定期的に計算されます。サイクルは、検証者の委任が変更されるたびに更新されます。たとえば、検証者が新しい委任を受信した場合などです。
単一の検証者の報酬は、委任が開始される前の合計報酬から現在の合計報酬を差し引くことによって計算できます。
詳細については、[F1料金配布ドキュメント](/docs/spec/fee_distribution/f1_fee_distr.pdf)を参照してください。

バリデーターが削除されるか、バリデーターが撤回を要求すると、コミッションがバリデーターに支払われます。
手数料は、[BeginBlock]操作が実行されるたびに計算されて増分され、累積料金額が更新されます。

クライアントが変更したとき、マンデートをキャンセルしたとき、またはお金を引き出したときにクライアントに割り当てられる報酬。
報酬が配布される前に、現在の委任中に発生したバリデーターへのすべてのスラッシュが適用されます。

## コスト配分でのF1参照カウント

F1経費配分では、元本が受け取る報酬は、コミッションが取り下げられたときに計算されます。この計算では、報酬の合計をトークンのシェアで割った条件を読み取る必要があります。これは、報酬が委託された期間から始まり、引き出しのために作成された最後の期間です。

さらに、スラッシュによって委任が持つトークンの数が変わるため(ただし、怠惰に計算しましたが、
委任者が注文をキャンセルした場合のみ)、スラッシュの前後のさまざまな期間の報酬を計算する必要があります
これは、プリンシパルの承認と報酬の撤回の間に発生します。したがって、スラッシュなど
スラッシュイベントで終了する期間を参照してください。

保存されているすべての過去の報酬レコードは、代表団によって引用されなくなります
または、スラッシュは読み取られないため、安全に削除できます(将来の委任と将来
スラッシュは常に将来の期間を指します)。これは、[ReferenceCount]を追跡することによって実現されます
そして、各履歴報酬ストレージエントリ。一度に新しいオブジェクト(デリゲートまたはスラッシュ)
参照が必要になる可能性のある履歴レコードを作成すると、参照カウントが増加します。
以前に履歴レコードを参照する必要があったオブジェクトを削除するたびに、を参照してください。
カウントが減ります。参照カウントがゼロの場合、履歴レコードは削除されます。