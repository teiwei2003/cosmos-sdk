# `分布`

## 概要

この_simple_配布メカニズムは、受動的な機能方法を説明しています
バリデーターと委任者の間で報酬を分配します.このメカニズムは
アクティブな報酬分配メカニズムほど正確に資金を割り当てない、および
したがって、将来的にアップグレードされます.

メカニズムは次のように動作します.集められた報酬はグローバルにプールされ、
検証者と委任者に受動的に割り当てられます.すべてのバリデーターは
集められた報酬のためにクライアントからコミッションを集める機会があります
代表代表.料金はグローバル報酬プールに直接徴収されます
そして、バリデーター提案者の報酬プール.パッシブアカウンティングの性質上、
報酬分配率に影響を与えるパラメータが変更されたときはいつでも
それが起こった場合、報酬の撤回も起こらなければなりません.

- 引き出しが行われるたびに、引き出しの対象となる最大金額を引き出す必要があります
   プールに何も残さずに到着しました.
- トークンを既存のアカウントにバインド、バインド解除、または再委任するときはいつでも、
   報酬は完全に撤回する必要があります(怠惰な会計の原則として)
   変化する).
- バリデーターが報酬コミッションを変更することを選択するたびに、すべてが蓄積されます
   コミッションの報酬は同時に引き出す必要があります.

上記のシナリオは `hooks.md`でカバーされています.

ここで概説する配布メカニズムは、遅延配布に使用されます
バリデーターと関連する委任者の間の次の報酬：

- 社会的流通のためのマルチトークン料金
- 提案者の報酬プール
- 膨らんだ原子規制
- プリンシパルのエクイティによって取得されたすべての報酬のバリデーターコミッション

料金はグローバルプールに集中しており、バリデーター固有です
提案者の報酬プール.使用されるメカニズムにより、バリデーターとデリゲーターが許可されます
独立して怠惰に彼らの報酬を撤回します.

## 欠点

怠惰な計算の一部として、各プリンシパルは累積アイテムを保持します
各バリデーターに固有であり、それらの近似を推定するために使用されます
グローバル料金プールに保持されているトークンのかなりの部分がそれらに属しています.

「
権利=元本の累積/すべての元本の累積
「

流入するロジスティクスが一定で等しい場合
各ブロックはトークンに報酬を与えます.この配布メカニズムは次のようになります.
アクティブな割り当て(各ブロックはすべてのプリンシパルに個別に割り当てられます).
ただし、これは非現実的であるため、アクティブな分布からの逸脱は
入ってくる報酬トークンの変動性と発生時間に基づく
他のクライアントからの報酬の引き出し.

受け取る報酬が大幅に増加することを知っている場合は、
あなたはこのイベントの後にやめようと動機づけられ、それによって増加します
既存の_accum_の値. [#2764](https://github.com/cosmos/cosmos-sdk/issues/2764)を参照してください
もっと詳しく知る.

## ステーキングへの影響

Atom条件でコミッションを請求し、Atom条件も許可します
自動バインディング(バリデーターによってバインドされた共有に直接割り当てられます)
BPoSに問題があります.基本的に、これら2つのメカニズムは相互に関連しています
エクスクルーシブ.委任と自動バインディングメカニズムが同時に存在する場合
トークンを誓約し、次にトークンを誓約するために適用されます
バリデーターとその委任者は、ブロックごとに変わります.これで
各ブロックの各コミッションレコードを計算する必要があります-
これは計算コストが高いと考えられています.

要するに、私たちは原子の委任と非結合原子しか持つことができません
アトムコミッション条項や結合アトム条項はありません.
前者を実装します.条件を再バインドしたい利害関係者は、
定期的に報酬を引き出して再バインドするスクリプトを設定します.

## コンテンツ

1. **[コンセプト](01_concepts.md)**
    - [F1料金配分の参照カウント](01_concepts.md#reference-counting-in-f1-fee-distribution)
2. **[State](02_state.md)**
3. **[ブロックの開始](03_begin_block.md)**
4. **[メッセージ](04_messages.md)**
    - [MsgSetWithdrawAddress](04_messages.md#msgsetwithdrawaddress)
    - [MsgWithdrawDelegatorReward](04_messages.md#msgwithdrawdelegatorreward)
        - [すべての引き出しバリデーター報酬](04_messages.md#withdraw-validator-rewards-all)
    - [一般的な計算](04_messages.md#common-calculations-)
5. **[フック](05_hooks.md)**
    - [委任された配布の作成または変更](05_hooks.md#create-or-modify-delegation-distribution)
    - [手数料率の変更](05_hooks.md#commission-rate-change)
    - [バリデーター状態の変更](05_hooks.md#change-in-validator-state)
6. **[イベント](06_events.md)**
    - [BeginBlocker](06_events.md#beginblocker)
    - [ハンドラー](06_events.md#handlers)
7. **[パラメータ](07_params.md)**
8. **[パラメータ](07_params.md)**
    - [CLI](08_client.md#cli)
    - [gRPC](08_client.md#grpc)