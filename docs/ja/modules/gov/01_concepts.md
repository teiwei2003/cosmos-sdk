# 概念

_免責事項:これは進行中の作業です。 メカニズムは変更されやすい。_

ガバナンスプロセスは、以下に概説するいくつかのステップに分かれています。

- **プロポーザルの送信:**プロポーザルはブロックチェーンに送信されます
   保証金。
- **投票:**デポジットが特定の値(`MinDeposit`)に達すると、提案は
   確認され、投票が始まります。 結合されたAtomホルダーは、`TxGovVote`を送信できます。
   提案に投票するためのトランザクション。
- **実行**一定期間後、投票は集計され、依存します
   結果として、提案のメッセージが実行されます。

## 提案の提出

### 提案を提出する権利

すべてのアカウントは、`MsgSubmitProposal`トランザクションを送信することでプロポーザルを送信できます。
プロポーザルが送信されると、その一意の`proposalID`によって識別されます。

### 提案メッセージ

プロポーザルには、次の場合に自動的に実行される`sdk.Msg`の配列が含まれています。
提案は通過します。 メッセージは、ガバナンスの`ModuleAccount`自体によって実行されます。 モジュール
ガバナンスによって特定のメッセージを実行できるようにする`x/upgrade`など
それぞれのメッセージサーバー内にホワイトリストを追加して、ガバナンスを付与する必要があります
モジュールは、クォーラムに達したときにメッセージを実行する権利をモジュール化します。 ガバナンス
モジュールは`MsgServiceRouter`を使用して、これらのメッセージが正しく作成されていることを確認します
実行するそれぞれのパスがありますが、完全な有効性チェックは実行しません。

## 保証金

スパムを防ぐために、プロポーザルは、によって定義されたコインにデポジットを入れて提出する必要があります`MinDeposit`パラメータ。

提案書を提出するときは、保証金を添付する必要があります。
厳密に正ですが、`MinDeposit`より劣る可能性があります。提出者は必要ありません
保証金の全額を自分で支払う。新しく作成されたプロポーザルはに保存されます
_非アクティブなプロポーザルキュー_であり、そのデポジットが`MinDeposit`を通過するまでそこにとどまります。
他のトークン所有者は、[デポジット]を送信することでプロポーザルのデポジットを増やすことができます
取引。デポジットの終了時間前にプロポーザルが`MinDeposit`を通過しない場合(デポジットが受け付けられなくなった時点)、提案は破棄されます:プロポーザルは州から削除され、デポジットは燃やされます(x/gov`EndBlocker`を参照)。
プロポーザルのデポジットがデポジットの終了時刻より前に(プロポーザルの送信中であっても)[MinDeposit]のしきい値を超えると、プロポーザルは[アクティブなプロポーザルキュー]に移動され、投票期間が開始されます。

預金はエスクローに保管され、ガバナンス`ModuleAccount`によって
提案が確定します(合格または却下)。

### デポジットの払い戻しと書き込み

- 提案が承認または拒否されたが拒否されなかった場合、各預金は自動的にそれぞれの預金者に返金されます(ガバナンスの[モジュールアカウント]から転送されます)。
- プロポーザルが1/3を超えて拒否された場合、デポジットはガバナンス`ModuleAccount`から削除され、プロポーザル情報とそのデポジット情報は状態から削除されます。
- 返金または焼却された預金はすべて州から削除されます。 イベントは、デポジットを燃やしたり返金したりするときに発行されます。

## 投票

### Participants

_Participants_は、提案に投票する権利を持つユーザーです。 コスモスハブでは、参加者は結合されたアトムホルダーです。 結合されていないAtom保有者およびその他のユーザーは、ガバナンスに参加する権利を取得しません。ただし、プロポーザルを提出してデポジットすることはできます。

次の場合、一部の_Participants_は特定のバリデーターの下で提案に投票することを禁止される可能性があることに注意してください。

- 提案が投票期間に入った後、上記のバリデーター_participant_結合または非結合のアトム。
- 提案が投票期間に入った後、_participant_がバリデーターになりました。

これは、_Participants_が他のバリデーターに結合されたAtomsで投票することを妨げるものではありません。 たとえば、_参加者_がプロポーザルが投票期間に入る前に一部のアトムをバリデーターAに結合し、プロポーザルが投票期間に入った後に他のアトムをバリデーターBに結合した場合、バリデーターBの下での投票のみが禁止されます。

### Voting period

プロポーザルが`MinDeposit`に達すると、すぐに`Voting period`に入ります。 我々`Voting period`を、投票が開始されてから投票が終了した瞬間。`Voting period`は常により短くする必要があります二重投票を防ぐための`Unbonding period`の初期値投票期間]は2週間です。

### オプションセット

プロポーザルのオプションセットは、参加者ができる選択肢のセットを指します
投票するときに選択します。

初期オプションセットには、次のオプションが含まれています。

- `Yes`
- `No`
- `NoWithVeto`
- `Abstain`

`NoWithVeto`は`No`としてカウントされますが、`Veto`投票も追加されます。`Abstain`オプションを使用すると、有権者は、提案に賛成または反対の投票をするつもりはないが、投票の結果を受け入れることを通知できます。

_注:UIから、緊急の提案については、[NoWithVeto]投票を行う[緊急ではない]オプションを追加する必要があります。_

### Weighted Votes

[ADR-037](../../../docs/architecture/adr-037-gov-split-vote.md)は、投票者が投票をいくつかの投票オプションに分割できる加重投票機能を導入しています。 たとえば、投票権の70％を使用して[はい]に投票し、30％を使用して[いいえ]に投票することができます。

多くの場合、そのアドレスを所有するエンティティは単一の個人ではない可能性があります。 たとえば、会社には異なる投票を希望するさまざまな利害関係者がいる可能性があるため、投票権を分割できるようにすることは理にかなっています。 現在、[パススルー投票]を行って、ユーザーにトークンに対する投票権を与えることはできません。 ただし、このシステムを使用すると、取引所は投票の好みについてユーザーをポーリングし、ポーリングの結果に比例してチェーン上で投票することができます。

チェーン上の均等投票を表すために、次のProtobufメッセージを使用します。

+++ https://github.com/cosmos/cosmos-sdk/blob/v0.43.0-alpha1/proto/cosmos/gov/v1beta1/gov.proto#L32-L40

+++ https://github.com/cosmos/cosmos-sdk/blob/v0.43.0-alpha1/proto/cosmos/gov/v1beta1/gov.proto#L126-L137

均等投票を有効にするには、[オプション]フィールドに重複する投票オプションが含まれていてはならず、すべてのオプションの重みの合計が1に等しくなければなりません。

### クォーラム

クォーラムは、必要な投票権の最小パーセンテージとして定義されます。
結果を有効にするための提案にキャストしました。

### しきい値

しきい値は、[はい]の投票の最小割合として定義されます(
提案が受け入れられるための[棄権]投票)。

当初、しきい値は50％に設定されており、投票の3分の1([棄権]投票を除く)が[NoWithVeto]投票である場合、拒否する可能性があります。 これは、投票期間終了時の[はい]の投票の割合([棄権]の投票を除く)が50％を上回り、[いいえ]の投票の割合が1/3(を除く)の場合に提案が受け入れられることを意味します[棄権]票)。

### 継承

委任者が投票しない場合、委任者はその検証者の投票を継承します。

- 委任者が検証者の前に投票した場合、委任者は
   バリデーターの投票。
- 委任者がそのバリデーターの後に投票した場合、そのバリデーターをオーバーライドします
   自分で投票してください。 提案が緊急の場合、それは可能です
   代表者が反応する機会を得る前に投票が終了し、
   バリデーターの投票を上書きします。 提案では、投票期間が終了する前に、総投票権の3分の2以上が通過する必要があるため、これは問題ではありません。 バリデーターの3分の2以上が共謀した場合、とにかく委任者の投票を検閲することができます。 

### 投票権を持たないことに対するバリデーターの罰

現在、バリデーターは投票に失敗したことで罰せられていません。

### Governance address

後で、特定のモジュールからのtxにのみ署名できる許可されたキーを追加する場合があります。 MVPの場合、`Governance address`は、アカウントの作成時に生成されるメインのバリデーターアドレスになります。 このアドレスは、コンセンサスメッセージの署名を担当するTendermintPrivKeyとは異なるPrivKeyに対応します。 したがって、バリデーターは、機密性の高いTendermintPrivKeyを使用してガバナンストランザクションに署名する必要はありません。

## ソフトウェアの更新

プロポーザルのタイプが`SoftwareUpgradeProposal`の場合、ノードをアップグレードする必要があります、投票された新しいバージョンへの彼らのソフトウェア。 このプロセスはに分かれています2つのステップ。

### シグナル

`SoftwareUpgradeProposal`が受け入れられた後、バリデーターは
実行を継続しながら、ソフトウェアの新しいバージョンをダウンロードしてインストールします、以前のバージョン。 バリデーターがダウンロードしてインストールしたら、アップグレードすると、切り替えの準備ができていることをネットワークに通知し始めます。
_precommits_にプロポーザルの`proposalID`を含めます。(_注:確認事前コミットでそれが欲しいということですか？_)

注:_precommit_ごとに1つの信号スロットしかありません。 いくつかの場合`SoftwareUpgradeProposals`は短期間で受け入れられ、パイプラインはフォームとそれらはそれらがそれらの順序で次々に実装されます受け入れられました。

### スイッチ

ブロックに2/3を超える_precommits_が含まれ、共通の`SoftwareUpgradeProposal`が通知されると、すべてのノード(バリデーターノード、非検証フルノード、ライトノードを含む)が新しいバージョンのソフトウェアに切り替わることが期待されます。

_注:フリップがプログラムでどのように処理されるかは明確ではありません_